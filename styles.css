/* ===== 黑白灰 + 金色（Apple 风） ===== */
:root{
  --bg:#fff;
  --text:#111;
  --muted:#6e6e73;
  --line:#e5e5ea;

  --gold:#c9a646;         /* 金色点缀 */
  --chip-a:#eef6ff;       /* A/B 日期底色 */
  --chip-final:#e8fff0;   /* Final 日期底色 */

  --radius-lg:20px;
  --radius-md:12px;

  --fz-title:28px;
  --fz-sub:20px;
  --fz-body:16px;
}

*{box-sizing:border-box}
html,body{
  margin:0;padding:0;background:var(--bg);color:var(--text);
  font: 16px/1.6 -apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Helvetica,Arial,"Segoe UI",Roboto;
  -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
}

/* 顶部 */
.topbar{display:flex;justify-content:space-between;align-items:center;padding:16px;gap:16px;border-bottom:1px solid var(--line);}
#app-title{font-size:22px;margin:0;font-weight:700;}
.badge-gold{background:var(--gold);color:#fff;padding:3px 8px;border-radius:999px;margin-left:8px;font-size:12px;}
.nav{display:flex;gap:8px;flex-wrap:wrap}
.nav-btn{appearance:none;background:#fff;border:1px solid var(--line);border-radius:10px;padding:8px 12px}
.nav-btn[aria-current="page"], .btn{background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px 14px;font-weight:600}
.nav-btn.ghost{background:transparent}

/* 视图切换 */
.view{display:none;padding:16px;max-width:1200px;margin:0 auto}
.view.active{display:block}

/* KPI */
.kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:16px 0}
.kpi{border:1px solid var(--line);border-radius:var(--radius-md);padding:12px;background:#fff}
.kpi-label{color:var(--muted);font-size:13px}
.kpi-value{font-size:24px;font-weight:700}

/* 卡片/列表 */
.card{background:#fff;border:1px solid var(--line);border-radius:var(--radius-lg);padding:16px;margin:16px 0}
.card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.btn-ghost{appearance:none;background:transparent;border:1px solid var(--line);border-radius:10px;padding:6px 10px}
.list{display:grid;gap:8px}
.list-item{border:1px solid var(--line);border-radius:12px;padding:10px;display:flex;justify-content:space-between;align-items:center}

/* 计算器 */
.calc-grid{display:grid;gap:10px;grid-template-columns:repeat(4,1fr);align-items:end}
.calc-grid label{display:flex;flex-direction:column;font-size:14px}
.calc-grid input{border:1px solid var(--line);border-radius:10px;padding:8px}
.calc-result{grid-column:1/-1;padding:10px;border:1px dashed var(--line);border-radius:10px}

/* 选择器修复：点击不瞬间消失 */
.select{position:relative}
.select-btn{appearance:none;background:#fff;border:1px solid var(--line);border-radius:10px;padding:6px 10px}
.select-menu{position:absolute;z-index:30;top:42px;left:0;background:#fff;border:1px solid var(--line);border-radius:12px;min-width:180px;box-shadow:0 8px 28px rgba(0,0,0,.08);display:none}
.select.open .select-menu{display:block}
.select-menu button{display:block;width:100%;text-align:left;appearance:none;background:#fff;border:0;padding:10px;border-bottom:1px solid var(--line);font-size:14px;cursor:pointer}
.select-menu button:last-child{border-bottom:0}

/* 表格 + 自适应（小屏转卡片，避免横向拖动） */
.table-wrap{overflow:visible}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid var(--line);padding:10px;text-align:left;vertical-align:top}
.table td .chips{display:flex;gap:6px;flex-wrap:wrap}
.chip{padding:2px 6px;border-radius:8px;font-size:12px;border:1px solid var(--line)}
.chip-a{background:var(--chip-a)}
.chip-final{background:var(--chip-final)}
.pay-status{font-size:12px;color:var(--muted)}
.producer{font-size:12px;color:var(--muted)}

@media (max-width:980px){
  .kpis{grid-template-columns:1fr}
  .calc-grid{grid-template-columns:1fr 1fr}
  .table{display:none}
  /* 小屏卡片 */
  #projects-wrap .card-row{border:1px solid var(--line);border-radius:12px;padding:12px;margin-bottom:10px;background:#fff}
  .row-top{display:flex;justify-content:space-between;gap:8px}
  .row-meta{display:grid;gap:6px;margin-top:8px;color:var(--muted);font-size:13px}
}

/* 作品合集 */
.gallery{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.poster{position:relative;border-radius:16px;overflow:hidden;border:1px solid var(--line);aspect-ratio:16/9;background:#f6f6f7;display:flex;align-items:center;justify-content:center}
.poster img{width:100%;height:100%;object-fit:cover}
.poster .caption{position:absolute;left:10px;bottom:10px;background:rgba(0,0,0,.56);color:#fff;padding:6px 10px;border-radius:10px;font-size:12px}
@media (max-width:980px){ .gallery{grid-template-columns:1fr 1fr} }

/* 模态&日历（档期） */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.32);display:none;align-items:center;justify-content:center;padding:16px}
.modal.show{display:flex}
.modal-dialog{background:#fff;border:1px solid var(--line);border-radius:16px;max-width:1000px;width:100%;padding:16px}
.modal-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.calendar{border:1px solid var(--line);border-radius:12px;overflow:hidden}
.cal-head{display:grid;grid-template-columns:repeat(7,1fr);background:#fafafa;border-bottom:1px solid var(--line);font-size:13px;color:var(--muted)}
.cal-head span{padding:8px 10px}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr)}
.cal-cell{min-height:92px;border-right:1px solid var(--line);border-bottom:1px solid var(--line);padding:6px 8px;font-size:12px;position:relative}
.cal-cell:nth-child(7n){border-right:none}
.cal-day{color:var(--muted)}
.ev{display:block;margin-top:6px;padding:4px 6px;border-radius:8px;border:1px solid var(--line)}
.ev-ab{background:var(--chip-a)}
.ev-final{background:var(--chip-final)}
.legend{padding:8px;display:flex;gap:12px}
.legend .dot{display:inline-flex;align-items:center;gap:6px}
.legend .dot::before{content:"";width:12px;height:12px;border-radius:6px;border:1px solid var(--line);display:inline-block}
.legend .ab::before{background:var(--chip-a)}
.legend .final::before{background:var(--chip-final)}
