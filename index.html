<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>剪辑 ERP 管理 · Projects</title>
  <link rel="stylesheet" href="./style.css" />
  <!-- Supabase JS v2 CDN -->
  <script src="https://unpkg.com/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="dot"></div>
      <strong>剪辑 ERP 管理</strong>
    </div>

    <div class="auth">
      <div id="authed" class="hidden">
        <span id="user-email" class="muted"></span>
        <button id="btn-logout" class="btn ghost">退出登录</button>
      </div>

      <div id="anon">
        <input id="login-email" type="email" placeholder="你的邮箱" />
        <button id="btn-login" class="btn">登录 / 获取验证码</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>新建 / 编辑项目</h2>
      <form id="project-form" autocomplete="off">
        <input type="hidden" id="project-id" />

        <div class="grid">
          <label>
            标题（必填）
            <input id="title" required />
          </label>
          <label>
            品牌
            <input id="brand" />
          </label>
          <label>
            类型
            <select id="type">
              <option value="">—</option>
              <option>LOOKBOOK</option>
              <option>形象片</option>
              <option>TVC</option>
              <option>宣传片</option>
              <option>纪录片</option>
              <option>花絮</option>
            </select>
          </label>
          <label>
            输出规格
            <select id="spec">
              <option value="">—</option>
              <option>1080p</option>
              <option>4K</option>
            </select>
          </label>
          <label>
            输出比例
            <select id="ratio">
              <option value="">—</option>
              <option>16:9</option>
              <option>9:16</option>
              <option>1:1</option>
              <option>3:4</option>
              <option>4:3</option>
            </select>
          </label>
          <label>
            时长（如 30s / 2min）
            <input id="duration" placeholder="例如：30s 或 2min" />
          </label>

          <label>
            A copy 时间
            <input id="a_copy_date" type="date" />
          </label>
          <label>
            B copy 时间
            <input id="b_copy_date" type="date" />
          </label>
          <label>
            Final 时间
            <input id="final_date" type="date" />
          </label>

          <label>
            收款状态
            <select id="pay_status">
              <option>unpaid</option>
              <option>deposit</option>
              <option>paid</option>
            </select>
          </label>
          <label>
            项目状态
            <select id="status">
              <option>open</option>
              <option>in_progress</option>
              <option>done</option>
              <option>archived</option>
            </select>
          </label>

          <label class="col-2">
            成片链接
            <input id="final_link" placeholder="https://…" />
          </label>

          <label class="col-2">
            备注
            <textarea id="notes" rows="3" placeholder="补充说明…"></textarea>
          </label>
        </div>

        <div class="actions">
          <button type="submit" class="btn" id="btn-save">保存</button>
          <button type="button" class="btn ghost" id="btn-reset">清空表单</button>
          <button type="button" class="btn danger hidden" id="btn-delete">删除</button>
        </div>
      </form>
    </section>

    <section class="card">
      <h2>项目列表</h2>

      <div class="toolbar">
        <input id="search" placeholder="搜索标题 / 品牌…" />
        <select id="filter-status" title="按状态">
          <option value="">全部状态</option>
          <option>open</option>
          <option>in_progress</option>
          <option>done</option>
          <option>archived</option>
        </select>
        <select id="filter-pay" title="按收款">
          <option value="">全部收款</option>
          <option>unpaid</option>
          <option>deposit</option>
          <option>paid</option>
        </select>
        <button id="btn-refresh" class="btn ghost">刷新</button>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>标题</th>
              <th>品牌</th>
              <th>类型</th>
              <th>规格</th>
              <th>比例</th>
              <th>时长</th>
              <th>A</th>
              <th>B</th>
              <th>Final</th>
              <th>收款</th>
              <th>状态</th>
              <th>成片</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>

      <p id="empty" class="muted hidden">暂无数据。</p>
    </section>
  </main>

  <footer class="foot">
    <span class="muted">© Editor Studio</span>
  </footer>

  <script src="./app.js"></script>
</body>
</html>
